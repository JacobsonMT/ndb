<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/templates/mainTemplate.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="pageTitle">Documentation</ui:define>
	
	<ui:define name="css">
			<h:outputStylesheet library="css" name="documentation.css" />
	</ui:define>
	
	<ui:define name="js">
		<script type="text/javascript">
	        	googleAnalyticsTrackPageviewIfConfigured( "/MARVdb/documentation" );
	    </script>
	</ui:define>

	<ui:define name="content">
	<script>
		$( document ).ready(function() {
			// Build Table of Contents 
			$('.section').each(function() {
				$('#toclist').append(
				   '<li><a href="#'+$(this).attr('id')+'">'+$(this).text()+'</a></li>'
				 );
			});
		});
	</script>
		<!-- BREADCRUMBS -->
		<p:panel styleClass="no-border" >
			<p:breadCrumb style="float:left;"> 
				<p:menuitem value="Categories" url="#" />
				<p:menuitem value="Home" url="index.xhtml" />
				<p:menuitem value="Documentation" url="documentation.xhtml" />
			</p:breadCrumb>  	            
		</p:panel>		
 		
		<div class="content-area section-content">		
			<h2> Documentation </h2>			
			<!-- Table of contents. -->
			<div id="toc" class="toc">
				<div id="toctitle">
					<h3>Table of contents</h3>
				</div>
				<!-- Content loaded dynamically on document ready. -->
				<ul id="toclist"></ul>
			</div>
				
			<!-- Documentation content -->
			<h3 id="search" class="section">Searching for variants</h3>
				MARVdb can be used to query variants, by gene, genomic location or publication.			
				<h4>Getting started</h4>
					<p>
						The variant database can be queried through the search bar displayed at the top of the <p:link  href="index.xhtml" >home page</p:link>. Enter a Gene name under <strong>Gene Symbol</strong>, such as <em>ADNP, CHD8 or SYNGAP1</em>, and click <strong>Submit</strong>.
					</p>
					<p>
						Alternatively, you can search for variants by genomic region. We are currently using the <strong>Hg19/GRCh37</strong> genome assembly. For search by <strong>Region</strong>, you need a chromosome, start coordinate, and stop coordinate. For example, to search the 1<sup>st</sup> choromsome from coordinates 1000000 to 2000000, enter <strong>chr1:1000000-2000000</strong>.
					</p>			
				<h4>Searching for variants from specific publications.</h4>
					<p>
						Our <p:link  href="publications.xhtml" >publications</p:link> section lists descriptions of works incorporated in our database. Click on the <span class="ui-icon ui-icon-circlesmall-plus" style="display: inline-block"/> icon of a specific paper to see the publication details. The resulting page can search for all variants included in the publication by clicking the number under <em>Variant Event Count</em>. 
						Our <p:link  href="publications.xhtml" >publications</p:link> section lists descriptions of works incorporated in our database. Click on the <span class="ui-icon ui-icon-circlesmall-plus" style="display: inline-block"/> icon of a specific paper to see the publication details. The resulting page can search for all variants included in the publication by clicking the number under <em>Variant Event Count</em>.
					</p>
					<p>
						<em>Example:</em> The <p:link href="paper.xhtml?paperId=18"> De Rubeis, 2014 </p:link> study reports <p:link href="variant.xhtml?paperId=18">1384</p:link> variants included in our database.						
					</p>
					
				<h4>Searching for variants overlapping different publications.</h4>
					<p>
						It is possible to look up the overlapping variants between two different publications through our 
						<p:link href="stats.xhtml">statistics</p:link> section. 
						Simply go to the <p:link href="stats.xhtml#variantOverlap">variant overlap heatmap</p:link>, 
						and click the grid cell with the intersecting papers of interest. 
					</p>				
					
					
				<h3 id="publications" class="section">Publications</h3>
				<p>
					For a given publication listed in the table, click the <span class="ui-icon ui-icon-circlesmall-plus" style="display: inline-block"/> icon to view more information such as variants counts and breakdowns, details about the cohort, or the experimental design.						
					The <p:link  href="publications.xhtml" >publications</p:link> section displays a summary of the following information for each publication.  This information is mostly based on what the publications reports. The fields listed in the summary are:
			 	</p>
						<ul>
							<li><strong>Key: </strong> A MARVdb specific identifier. Used only within this application to refer to specific publications.</li>
							<li><strong>Title: </strong> The title of the publication.</li>
							<li><strong>Year: </strong> Year of publication.</li>
							<li><strong>Scope: </strong> The breadth of the sequencing study. Smaller studies may have only sequence as little as one gene, while others performed <em>Whole-Genome Sequencing (WGS)</em> of their cohorts, which includes the entire genome. 
							In between these, there is also <em> Whole-Exome sequencing (WES)</em>, which only includes the protein coding part of the genome.</li>
							<li><strong>Reporting: </strong> Focus in terms of variant reporting. Some papers are looking for <em>de novo</em> variants; cases where the mutation is a inherited from the germ cell rather than the parent. 
							When the sequenced proband's relative information is not available, variant identification is often done against a group of controls (Case-Control studies.) </li>
							<li><strong>Effects: </strong> The publications' reported variants' functional effect or genetic context. Functional effects describe what the variant looks like, and the impact on the transcription reading frame. For example, variants that cause the reading frame to shift are called frameshift variants. If a variant does not changed the amino acid sequence, the it is a synonymous variant. The genetic context is more of less the location of the variant, such splice sites and 3'-end/5'-end untranslated region (3UTR, 5UTR). </li>
							<li><strong>DOI: </strong> The Digital Object Identifier (DOI) is a tag assigned to digital objects, such as publications. It also serves as a permanent web URL (when prefixed with https://dx.doi.org/ ) for work that may be accessible through different databases.</li>
						</ul> 		
							
			<h3 id="statistics" class="section">Statistics</h3>
				<p>
				Our <p:link href="stats.xhtml"> statistics </p:link> section includes information the data included in the database. We provide a different rankings for genes implicated in the variants in our database, based their frequency, predicted severity and inheritance.
				 </p>
				 
				 <p>
				 	We define Loss of Function mutations as a variant that is either frameshift, nonsense, or that appears on the splice site (2 bases before or after the first or last exon, respectively.)
				 </p>
				
				 <p>
				 	We also include whether the variant is reported as <em>de novo</em> or not, when the information is available from the publication material.
				 </p>
				 
			<h3 id="harmonizing" class="section">Data harmonization</h3>
			<p>
			To make this project possible, we had to harmonize different variant reporting conventions, coordinate schemes and genome assemblies.
			</p>
			
				
			<h4>Conventions used in MARVdb</h4>
			<ul>
				<li><strong>Allele change:</strong> In cases of insertions or deletions, we use a one base anchor to disambiguate the allele change. 
				For <p:link href="variant.xhtml?NCBIGeneId=23126">example</p:link>, an insertion of <em>CGTCATCA</em> on the chromosome 1, from coordinate 151377903 to 151377903 would be listed as T, TCGTCATCA, chr1:151377903-151377903 for its reference allele (REF), alternated allele (ALT), and genomic location. For single nucleotide variants (SNVs), we simply display the before and after nucleotides as REF and ALT.</li>
				<li><strong>Coordinate system:</strong> The index is 1-based, meaning that a variant from 10,000-10,003 would affect 4 bases.</li>				
			</ul>
			
			<p> In cases of doubts, the raw data for the publication's supplied material can be view for a any given variant through the "Sources" column in the variant results. Simply click the <span class="ui-icon ui-icon-search inline-icon" style="display: inline-block"/> icon. 
			If you find any inconsistencies, please report them to <a href="mailto:#{applicationProperties.getProperty('ndb.email')}">#{applicationProperties.getProperty('ndb.email')}</a>.</p>				        					 
			
						
			<h4>Harmonizing publications</h4>
			<p>
				For more information about our harmonization process, please contact: <a href="mailto:#{applicationProperties.getProperty('ndb.email')}">#{applicationProperties.getProperty('ndb.email')}</a>.
			</p>
			
			<h3 id="statistics" class="section">Reporting errors</h3>
				<p> 
					To contact us, please send an e-mail to contact <a href="mailto:#{applicationProperties.getProperty('ndb.email')}">#{applicationProperties.getProperty('ndb.email')}</a>.
				</p>
		
		</div>			
	</ui:define>

</ui:composition>